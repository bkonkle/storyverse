type Permission {
  """
  A unique key to represent the Permission
  """
  key: String!

  """
  A display name for the Permission
  """
  name: String!

  """
  A description of the Permission
  """
  description: String!
}

type Role {
  """
  A unique key to represent the Role
  """
  key: String!

  """
  A display name for the Role
  """
  name: String!

  """
  A description of the Role
  """
  description: String!

  """
  The Permissions granted by the Role
  """
  permissions: [Permission!]!
}

type RoleGrant {
  id: UUID!

  """
  The key of the granted Role
  """
  roleKey: String!

  """
  The id of the Profile the Role is granted to
  """
  profileId: UUID!

  """
  An optional content id from another table that this Role is constrained to
  """
  subjectId: UUID

  """
  The table that the optional subjectId is from
  """
  subjectTable: String

  createdAt: DateTime!
  updatedAt: DateTime!
}

extend type Profile {
  """
  Retrieve all Roles granted to the Profile, optionally in the context of content from another
  table.
  """
  roles(subjectTable: String, subjectId: UUID): [Role!]!

  """
  Retrieve all Permissions granted to the Profile, optionally in the context of content from another
  table.
  """
  permissions(subjectTable: String, subjectId: UUID): [Permission!]!
}
